# janephp-template

[![packagist](https://img.shields.io/packagist/v/petstore/sdk)](https://packagist.org/packages/petstore/sdk)
[![build](https://github.com/remarkablemark/janephp-template/actions/workflows/build.yml/badge.svg)](https://github.com/remarkablemark/janephp-template/actions/workflows/build.yml)
[![test](https://github.com/remarkablemark/janephp-template/actions/workflows/test.yml/badge.svg)](https://github.com/remarkablemark/janephp-template/actions/workflows/test.yml)

PHP library for [Petstore](https://petstore3.swagger.io/). Code is generated using the [OpenAPI spec](https://petstore3.swagger.io/api/v3/openapi.json).

## Requirements

### Version

PHP >=8.1

## Install

Install the package with [Composer](https://getcomposer.org/):

```sh
composer require petstore/sdk
```

If you're missing a package providing `psr/http-client-implementation`:

```sh
composer require php-http/guzzle7-adapter
```

Add [autoloading](https://getcomposer.org/doc/01-basic-usage.md#autoloading):

```php
require_once 'vendor/autoload.php';
```

## Usage

Instantiate the SDK:

```php
use Petstore\Petstore;

$petstore = new Petstore('YOUR_API_KEY', 'YOUR_API_URL');

$client = $petstore->client;
```

Or create a custom client:

```php
use Petstore\Client;

$httpClient = \Http\Discovery\Psr18ClientDiscovery::find();
$uri = \Http\Discovery\Psr17FactoryDiscovery::findUriFactory()->createUri('YOUR_API_URL');
$bearer = new \Http\Message\Authentication\Bearer('YOUR_API_KEY');
$plugins = [
    new \Http\Client\Common\Plugin\AddHostPlugin($uri),
    new \Http\Client\Common\Plugin\AuthenticationPlugin($bearer),
];
$httpClient = new \Http\Client\Common\PluginClient($httpClient, $plugins);

$client = Client::create($httpClient);
```

Add a pet:

```php
use Petstore\Petstore;
use Petstore\Model\Pet;

$petstore = new Petstore('YOUR_API_KEY');

$pet = new Pet();
$pet->setName('Neo');
$pet->setPhotoUrls(['https://placecats.com/neo/300/200']);
$response = $petstore->client->addPet($pet);
```

Handle an API error:

```php
use Petstore\Petstore;

$petstore = new Petstore('YOUR_API_KEY');

try {
    $petstore->client->getPetById(0);
} catch (Throwable $exception) {
    echo $exception->getMessage();
    echo $exception->getCode();
}
```

## Scripts

### `composer build`

Generate the code:

```sh
composer build
```

### `composer clean`

Delete the `lib/` directory:

```sh
composer clean
```

### `composer test`

Run the tests:

```sh
composer test
```

## About This Package

This package is automatically generated by [Jane](https://github.com/janephp/janephp).
